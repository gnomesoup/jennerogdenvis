coord_fixed() + theme(aspect.ratio=1) +
theme_nothing() +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim, ylim=ylim)
p
library(ggplot2); library(wesanderson); library(ggmap)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() + theme(aspect.ratio=1) +
# theme_nothing() +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim, ylim=ylim)
p
xlim - c(-2000,2000)
xlim
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
xlim <- xlim + c(-2000, 2000)
ylim <- xlim + c(-2000, 2000)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() + theme(aspect.ratio=1) +
# theme_nothing() +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim, ylim=ylim)
p
library(rgdal);library(ggplot2); library(dplyr)
bound <- readOGR("./Boundaries", "CPS_Elementary_School_Attendance_Boundaries_SY1415")
# bound <- spTransform(bound, CRS("+proj=longlat +datum=WGS84"))
schools <- data.frame(SchoolName = bound$SchoolName, SchoolID = bound$SchoolID, SchoolAddr = bound$SchoolAddr)
boundplot <- fortify(bound)
jenog <- subset(bound, bound$SchoolName == "OGDEN" | bound$SchoolName == "JENNER")
jenogplot <- fortify(jenog)
xlim <- as.numeric(bbox(jenog)[1,])
ylim <- as.numeric(bbox(jenog)[2,])
schoolLoc <- data.frame(SchoolName = c("Jenner", "Ogden East", "Ogden West"),
long = c(-87.640825, -87.629096, -87.660443),
lat = c(41.902122, 41.900282, 41.891817))
df <- SpatialPoints(schoolLoc[,c("long","lat")], proj4string=CRS("+proj=longlat +datum=WGS84"))
df <- spTransform(df, bound@proj4string)
df <- coordinates(df)
schoolLoc$long <- df[,1]
schoolLoc$lat <- df[,2]
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
# xlim <- xlim + c(-2000, 2000)
# ylim <- xlim + c(-2000, 2000)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() + theme(aspect.ratio=1) +
# theme_nothing() +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim, ylim=ylim)
p
xlim + c(-2000, 2000)
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
# xlim <- xlim + c(-2000, 2000)
# ylim <- xlim + c(-2000, 2000)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() + theme(aspect.ratio=1) +
# theme_nothing() +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
# coord_cartesian(xlim=xlim, ylim=ylim)
p
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
# xlim <- xlim + c(-2000, 2000)
# ylim <- xlim + c(-2000, 2000)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() + theme(aspect.ratio=1) +
# theme_nothing() +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal)# +
# coord_cartesian(xlim=xlim, ylim=ylim)
p
coord_cartesian(xlim=xlim, ylim=ylim)
p <- coord_cartesian(xlim=xlim, ylim=ylim)
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
# xlim <- xlim + c(-2000, 2000)
# ylim <- xlim + c(-2000, 2000)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() + theme(aspect.ratio=1) +
# theme_nothing() +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal)# +
# coord_cartesian(xlim=xlim, ylim=ylim)
p
p + coord_cartesian(xlim, ylim)
p + coord_cartesian(xlim + c(-200, 200), ylim + c(-200, 200))
p + coord_cartesian(xlim + c(-200, 200), ylim + c(-500, 500))
p + coord_cartesian(xlim + c(-500, 500), ylim + c(-500, 2000))
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim, ylim=ylim)
p
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer)
p
bbox(genog)
bbox(jenog)
mutate(bbox(jenog), dif = max - min)
str(bbox(jenog))
bbox(jenog) %>% data_frame() %>% mutate(dif = max - min + 800)
as.data.frame(bbox(jenog))
data_frame(bbox(jenog))
bbox(jenog) %>% as.data.frame() %>% mutate(dif = max - min + 800)
bbox(jenog) %>% as.data.frame() %>% mutate(dif = (max - min + 800)/2)
bbox(jenog) %>% as.data.frame() %>% mutate(mean = mean()) %>% mutate(dif = max - min + 800)
bbox(jenog) %>% as.data.frame() %>% summarise(mean = mean()) %>% mutate(dif = max - min + 800)
bbox(jenog) %>% as.data.frame() %>% summarise(mean = mean())
bbox(jenog) %>% as.data.frame() %>% group(min, max) %>% summarise(mean = mean())
bbox(jenog) %>% as.data.frame() %>% group_by(min, max) %>% summarise(mean = mean())
bbox(jenog) %>% as.data.frame()
bbox(jenog) %>% as.data.frame() summarize(mean())
bbox(jenog) %>% as.data.frame() summarize(mean(n))
bbox(jenog) %>% as.data.frame() %>% mutute(mean = mean(min:max))
bbox(jenog) %>% as.data.frame() %>% mutate(mean = mean(min:max))
bbox(jenog) %>% rowMean()
rowMean(as.data.frame(bbox(jenog)))
bbox(jenog) %>% as.data.frame() %>% mutate(mean = mean(min,max))
bbox(jenog) %>% as.data.frame() %>% mutate_each(mean = mean(min,max))
t(bbox(jenog))
rowMeans(t(bbox(jenog)))
rowMeans((bbox(jenog)))
rowMeans(t(bbox(jenog)))
lims <- bbox(jenog) %>% as.data.frame()
lims$mean <- rowMeans(t(lims))
lims
lims <- bbox(jenog) %>% as.data.frame()
rowMeans(lims)
lims$mean <- rowMeans((lims))
lims
lims <- lims %>% mutate(dif = max - min)
lims
116526-1167581
118526-1167581
1186526-1167581
lims <- bbox(jenog) %>% as.data.frame()
lims %>% mutate(mean(max, min))
lims %>% mutate(mean(c(min,max))
lims %>% mutate(mean(c(min,max)))
lims %>% mutate(mean(c(min,max)))
lims %>% mutate(mean = mean(c(min,max)))
lims %>% mutate_each(mean = mean(c(min,max)))
lims %>% mutate_each(mean = (min+max)/2)
lims %>% mutate(mean = (min+max)/2)
lims %>% mutate(mean = rowMeans(min,max))
lims %>% mutate(mean = rowMeans(.))
lims %>% mutate(mean = rowMeans(.), span = (max - min)/2)
max(lims$span)
lims$span
lims <- bbox(jenog) %>% as.data.frame %>% mutate(mean = rowMeans(.), span = (max-min)/2)
lims
max(lims$span)
xlim <- c(lims$span * -1, lims$span) * lims$mean
xlim
xlim <- c(lims$span * -1, lims$span) + lims$mean
xlim
xlim <- c(max(lims$span) * -1, max(lims$span)) + lims$mean
xlim
lims <- lims %>% mutate(min = mean - max(max))
lims
lims <- lims %>% mutate(min = mean - max(span))
lims
lims <- lims %>% mutate(max = mean + max(span))
xlim <- as.numeric(lims[1:2, 1:2])
xlim <- as.numeric(lims[1, 1:2])
ylim <- as.numeric(lims[2, 1:2])
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer)
p
lims
bbox(jenog)
wways <- readOGR("./Waterways", "Hydro")
wwaysplot <- fortify(wways)
View(wwaysplot)
p + geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='grey')
p + geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue')
p + geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') + geom_path(colour=white, size=1)
p + geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') + geom_path(colour='white', size=1)
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour='white', size=1)
p
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour='white', size=1)
pSchools <- p + geom_points(data=schoolLoc, aes(long, lat), aes.inherit=F, size=4)
pSchools
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour='white', size=1)
pSchools <- p + geom_point(data=schoolLoc, aes(long, lat), aes.inherit=F, size=4)
pSchools
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour='white', size=1)
pSchools <- p + geom_point(data=schoolLoc, aes(long, lat), inherit.aes=F, size=4)
pSchools
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour='white', size=1)
pSchools <- p + geom_point(data=schoolLoc, aes(long, lat, , labels=SchoolName), inherit.aes=F, size=4, colour=pal[4])
pSchools
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour='white', size=1)
pSchools <- p + geom_point(data=schoolLoc, aes(long, lat, labels=SchoolName), inherit.aes=F, size=4, colour=pal[4])
pSchools
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour="white", size=1) +
scale_fill_manual(values=pal) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill='lightblue') +
geom_path(colour='white', size=1)
pSchools <- p + geom_point(data=schoolLoc, aes(long, lat, labels=SchoolName), inherit.aes=F, size=4, colour=pal[3])
pSchools
pSchools + geom_text()
pSchools + geom_text(data=schoolLoc, aes(long, lat, labels=paste0(" ", SchoolName)), eval=T, hjust=0)
pSchools + geom_text(data=schoolLoc, aes(long, lat, labels=paste0(" ", SchoolName)), eval=T, hjust=0, inherit.aes=F)
pSchools + geom_text(data=schoolLoc, aes(long, lat, label=paste0(" ", SchoolName)), eval=T, hjust=0, inherit.aes=F)
pSchools + geom_text(data=schoolLoc, aes(long, lat, label=paste0("  ", SchoolName)), eval=T, hjust=0, inherit.aes=F)
pal
pal
pal[2,5]
pal[2]
pal
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill=pal[1]) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=c(pal[2], pal[5])) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer) +
pSchools <- p + geom_point(data=schoolLoc, aes(long, lat), inherit.aes=F, size=4, colour=pal[3]) +
geom_text(data=schoolLoc, aes(long, lat, label=paste0("  ", SchoolName)), eval=T, hjust=0, inherit.aes=F)
pSchools
pal
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill=pal[1]) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=c(pal[2], pal[5])) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer) +
pSchools <- p + geom_point(data=schoolLoc, aes(long, lat), inherit.aes=F, size=4, colour=pal[3]) +
geom_text(data=schoolLoc, aes(long, lat, label=paste0("  ", SchoolName)), eval=T, hjust=0, inherit.aes=F)
pSchools
library(ggplot2); library(wesanderson); library(ggmap)
pal <- wes_palette("Moonrise3")
buffer <- c(-800, 800)
p <- ggplot(boundplot) +
aes(long, lat, group=group) +
geom_polygon(fill=pal[4]) +
coord_fixed() +
theme_nothing() + theme(aspect.ratio=1) +
geom_polygon(data=jenogplot, aes(long, lat, group=group, fill=id)) +
geom_polygon(data=wwaysplot, aes(long, lat, group=group), fill=pal[1]) +
geom_path(colour="white", size=1) +
scale_fill_manual(values=c(pal[2], pal[5])) +
coord_cartesian(xlim=xlim + buffer, ylim=ylim + buffer)
pSchools <- p + geom_point(data=schoolLoc, aes(long, lat), inherit.aes=F, size=4, colour=pal[3]) +
geom_text(data=schoolLoc, aes(long, lat, label=paste0("  ", SchoolName)), eval=T, hjust=0, inherit.aes=F)
pSchools
View(crime)
unique(crime$PRIMARY.DESCRIPTION)
?CRS
summary(bound)
head(filter(crime, PRIMARY.DESCRPTION=="SEX OFFENCE"))
head(filter(crime, PRIMARY.DESCRIPTION=="SEX OFFENCE"))
View(head(filter(crime, PRIMARY.DESCRIPTION=="SEX OFFENCE")))
View(head(filter(crime, PRIMARY.DESCRIPTION=="SEX OFFENSE")))
unique(crime$SECONDARY.DESCRIPTION)
unique(crime$SECONDARY.DESCRIPTION) %>% grep("RAPE")
unique(crime$SECONDARY.DESCRIPTION) %>% grep("RAPE", .)
grep("RAPE", crime$SECONDARY.DESCRIPTION)
grep("*RAPE*", crime$SECONDARY.DESCRIPTION)
p + geom_point(data=crime, aes(group=1), inherit.aes=F) + stat_density2d(data=crime, aes(group=1)
)
names(crime)
names(crime)[13:14]
names(crime)[13:14] <- c("long", "lat")
p + geom_point(data=crime, aes(group=1), inherit.aes=F) + stat_density2d(data=crime, aes(group=1)
)
p + geom_point(data=crime, aes(group=1), inherit.aes=F) + stat_density2d(data=crime, aes(group=1))
crime
names(crime)
p + geom_point(data=crime, aes(group=1))
p + geom_point(data=crime, aes(group=1), shape='x')
p + geom_point(data=crime, aes(group=1)) + stat_density2d(data=crime, aes(group=1))
p + geom_point(data=crime, aes(group=1), size = 1, alpha = '.8', colour = pal[3]) + stat_density2d(data=crime, aes(group=1))
library(readr); library(lubridate); library(curl); library(dplyr)
dir.create("crime", showWarnings=F)
curl_download("https://data.cityofchicago.org/resource/x2n5-8w5q.csv", "./crime/chicrimes1year.csv") #download latest crime
crime <- read.csv("./crime/chicrimes1year.csv") #load it to an object
crime <- crime %>% filter(!is.na("LATITUDE")) #make sure we have all locations
library(readr); library(lubridate); library(curl); library(dplyr)
dir.create("crime", showWarnings=F)
curl_download("https://data.cityofchicago.org/resource/x2n5-8w5q.csv", "./crime/chicrimes1year.csv") #download latest crime
crime <- read_csv("./crime/chicrimes1year.csv") #load it to an object
crime <- crime %>% filter(!is.na("LATITUDE")) #make sure we have all locations
library(readr); library(lubridate); library(curl); library(dplyr)
dir.create("crime", showWarnings=F)
curl_download("https://data.cityofchicago.org/resource/x2n5-8w5q.csv?select=*", "./crime/chicrimes1year.csv") #download latest crime
crime <- read_csv("./crime/chicrimes1year.csv") #load it to an object
crime <- crime %>% filter(!is.na("LATITUDE")) #make sure we have all locations
library(readr); library(lubridate); library(curl); library(dplyr)
dir.create("crime", showWarnings=F)
curl_download("https://data.cityofchicago.org/resource/x2n5-8w5q?select=*", "./crime/chicrimes1year.csv") #download latest crime
crime <- read_csv("./crime/chicrimes1year.csv") #load it to an object
crime <- crime %>% filter(!is.na("LATITUDE")) #make sure we have all locations
install.packages("RSocrata")
library(readr); library(lubridate); library(curl); library(dplyr); library(RSocrata)
dir.create("crime", showWarnings=F)
crime <- read.socrata("https://data.cityofchicago.org/resource/x2n5-8w5q") #download latest crime
# crime <- read_csv("./crime/chicrimes1year.csv") #load it to an object
crime <- crime %>% filter(!is.na("LATITUDE")) #make sure we have all locations
library(readr); library(lubridate); library(curl); library(dplyr); library(RSocrata)
dir.create("crime", showWarnings=F)
crime <- read.socrata("https://data.cityofchicago.org/resource/x2n5-8w5q.json") #download latest crime
crime <- read_csv("./crime/Crimes_-_One_year_prior_to_present.csv") #load it to an object
crime <- crime %>% filter(!is.na("LATITUDE")) #make sure we have all locations
names(crime)[13:14] <- c("long", "lat")
p + geom_point(data=crime, aes(group=1), size = 1, alpha = '.8', colour = pal[3]) + stat_density2d(data=crime, aes(group=1))
p + geom_point(data=crime, aes(group=1), size = 1, alpha = '.8', colour = 'red') +
stat_density2d(data=crime, aes(group=1), color = 'red')
p + geom_point(data=crime, aes(group=1), size = 3, alpha = '.5', colour = 'red') +
stat_density2d(data=crime, aes(group=1), color = 'red')
p + geom_point(data=crime, aes(group=1), size = 3, alpha = .5, colour = 'red') +
stat_density2d(data=crime, aes(group=1), color = 'red')
pts <- coordinates(crime) <- ~long + lat
pts <- crime(,c("long", "lat"))
pts <- crime[,c("long", "lat")]
head(pts)
coordinates(pts) <- ~long+lat
pts=data.frame(
x=runif(100,5,12),
y=runif(100,10,15),
z=sample(letters,100,TRUE))
pts
coordinates(pts) <- ~x+y
?coordinates
pts <- crime[,c("long", "lat")]
names(pts) <- c("x", "y")
coordinates(pts) <- ~x+y
pts <- as.data.frame(crime)
head(pts)
coordinates(pts) <- ~long+lat
pts <- filter(pts, !is.na(pts$long))
coordinates(pts) <- ~long+lat
over(jenog, pts)
jenog
names(jenog)
summary(jenog)
str(jenog)
proj4string(pts) <- proj4string(jenog)
?over
test <- pts %over% jenog
head(test)
test <- over(pts, jenog)
head(test)
test <- over(jenog, pts)
test
View(test)
test <- over(pts, jenog)
vignette("over")
?convProj
