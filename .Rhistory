ggmap(map)
install.packages("rgdal")
library(rgdal)
bound <- readOGR("./Boundaries", "CPS_Elementary_School_Attendance_Boundaries_SY1415")
summary(bound)
bound
bound <- spTransform(bound, CRS("+proj=longlat +datum=WGS84"))
str(bound)
bound <- fortify(bound)
library(rgdal);library(ggplot2)
bound <- fortify(bound)
View(bound)
map <- get_map(location=c(lon = -87.638, lat = 41.895), zoom = 14, maptype="roadmap")
library(ggmap)
map <- get_map(location=c(lon = -87.638, lat = 41.895), zoom = 14, maptype="roadmap")
chi <- ggmap(map)
library(ggmap)
map <- get_map(location=c(lon = -87.638, lat = 41.895), zoom = 14, maptype="roadmap")
chi <- ggmap(map)
eMap <- chi + geom_polygon(aes(x=long, y=lat, group=group, size = .2, data=bound, alpha=0))
eMap
library(ggmap)
map <- get_map(location=c(lon = -87.638, lat = 41.895), zoom = 14, maptype="roadmap")
chi <- ggmap(map)
eMap <- chi + geom_polygon(aes(x=long, y=lat, group=group), size = .2, data=bound, alpha=0)
eMap
library(ggmap)
map <- get_map(location=c(lon = -87.638, lat = 41.895), zoom = 14, maptype="roadmap")
chi <- ggmap(map)
eMap <- chi + geom_polygon(aes(x=long, y=lat, group=group), fill=grey, size = .2, color='green', data=bound, alpha=0)
eMap
library(ggmap)
map <- get_map(location=c(lon = -87.638, lat = 41.895), zoom = 14, maptype="roadmap")
chi <- ggmap(map)
eMap <- chi + geom_polygon(aes(x=long, y=lat, group=group), fill=grey, size = .8, color='green', data=bound, alpha=0)
eMap
boundaries <- readOGR("./Boundaries", "CPS_Elementary_School_Attendance_Boundaries_SY1415")
boundaries  <- spTransform(bound, CRS("+proj=longlat +datum=WGS84"))
boundaries <- spTransform(bound, CRS("+proj=longlat +datum=WGS84"))
boundaries <- spTransform(boundaries, CRS("+proj=longlat +datum=WGS84"))
??rgdal
projInfo(boundaries)
getDescription(boundaries)
str(boundaries)
boundaries$data
boundaries$SchoolName
library(dplyr)
ogden <- bound %>% select(group=359)
ogden <- bound %>% select(id=359)
ogden <- bound %>% fitler(id=359)
ogden <- bound %>% filter(id=359)
ogden <- bound %>% filter(id==359)
View(ogden)
?grep
grep("OGDEN", boundaries$SchoolName)
grep("JENNER", boundaries$SchoolName)
jenner <- bound %>% filter(id==210)
jenner
chi + geom_polygon(aes(x=long, y=lat, group=group), fill=grey, size = 2, color='black', data=jenner, alpha=0)
chi + geom_polygon(aes(x=long, y=lat, group=group), fill=grey, size = 2, color='black', data=jenner, alpha=0)
geom_polygon(aes(x=long, y=lat, group=group), fill=grey, size = 2, color='black', data=bound, alpha=0)
ggplot(bound, aes(x=long, y=lat)) + geom_polygon(aes(fill=grey, group=id))
install.packages('maps')
library(maps)
map_data(states)
map_data("state")
states <- map_data("states")
states <- map_data("state")
usa <- ggplot(states, aes(x=long, y=lat, group=group)) + geom_polygon(fill='yellow', colour='black')
usa
ggplot(bound, aes(x=long, y=lat, group=group)) + geom_polygon(fill='yellow', colour='black')
ggplot(bound, aes(x=long, y=lat, group=group)) + geom_polygon(fill='yellow', colour='black') + coord_fixed()
?curl
?download_file
??download
??directory
dir.create("crime", showWarnings=F)
curl_download('https://data.cityofchicago.org/resource/ijzp-q8t2.csv', 'crime/crimes2001toPresent.csv')
dir.create("crime", showWarnings=F)
download.file('https://data.cityofchicago.org/resource/ijzp-q8t2.csv', 'crime/crimes2001toPresent.csv', method='curl')
dir.create("crime", showWarnings=F)
download.file('https://data.cityofchicago.org/api/views/ijzp-q8t2/rows.csv?accessType=DOWNLOAD', 'crime/crimes2001toPresent.csv', method='curl')
schools <- boundaries$SchoolName
grep("OGDEN", schools)
install.packages("ggplot2")
install.packages("dplyr")
install.packages("rgdal", "ggmap")
install.packages("ggmap")
install.packages("rgdal")
schools
grep("OG*", schools)
grep("OGDEN*", schools)
grep("*OGDEN*", schools)
ogden <- filter(bound, id==359)
ogden <- select(bound, id==359)
library(dplyr)
ogden <- filter(bound, id==359)
ogden
ogden <- filter(bound, id==358)
?fortify
library(ggmap)
library(rgdal);library(ggplot2)
bound <- readOGR("./Boundaries", "CPS_Elementary_School_Attendance_Boundaries_SY1415")
bound <- spTransform(bound, CRS("+proj=longlat +datum=WGS84"))
schools <- data.frame(SchoolName = bound$SchoolName, SchoolID = bound$SchoolID, SchoolAddr = bound$SchoolAddr)
bound <- fortify(bound)
View(schools)
grep("OGDEN", schools$SchoolName)
library(rgdal);library(ggplot2)
bound <- readOGR("./Boundaries", "CPS_Elementary_School_Attendance_Boundaries_SY1415")
bound <- spTransform(bound, CRS("+proj=longlat +datum=WGS84"))
schools <- data.frame(SchoolName = bound$SchoolName, SchoolID = bound$SchoolID, SchoolAddr = bound$SchoolAddr)
bound <- fortify(bound)
ogdenIndex <- grep("OGDEN", schools$SchoolName) - 1
jennerIndex <- grep("JENNER"), schools$SchoolName) - 1
jennerIndex <- grep("JENNER", schools$SchoolName) - 1
ogden <- bound %>% filter(id == ogdenIndex)
library(rgdal);library(ggplot2); library(dplyr)
ogden <- bound %>% filter(id == ogdenIndex)
jenner <- bound %>% filter(id == jennerIndex)
p <- gplot(bound aes(x = long, y = lat)) + geom_polygon(aes(fill='grey', group=group))
p <- gplot(bound, aes(x = long, y = lat)) + geom_polygon(aes(fill='grey', group=group))
library(ggplot2)
p <- gplot(bound, aes(x = long, y = lat)) + geom_polygon(aes(fill='grey', group=group))
p <- ggplot(bound, aes(x = long, y = lat)) + geom_polygon(aes(fill='grey', group=group))
p
p <- ggplot(bound, aes(x = long, y = lat)) + geom_polygon(aes(fill=group, group=group))
p
p <- p + coord_fixed()
p
p <- ggplot(ogden, aes(x = long, y = lat)) + geom_polygon(aes(fill=group, group=group))
p <- p + coord_fixed()
p
test <- rbind(ogden, jenner)
p <- ggplot(test, aes(x = long, y = lat)) + geom_polygon(aes(fill=id, group=group))
p <- p + coord_fixed()
p
install.packages("wesanderson")
library(wesanderson)
??wesanderson
p + wes_palette("Moonrise1")
wes_pallette("Moonrise1")
wes_palette("Moonrise1")
?"wes_palette"
wes_palette("Moonrise2")
wes_palette("Moonrise2", 5)
wes_palette("Moonrise3")
?"wes_palette"
heatmap
p + scale_fill_manual(values = wes_palette("Moonrise1"))
p + scale_fill_manual(values = wes_palette("Moonrise1")) + coord_fixed()
p + scale_fill_manual(values = wes_palette("Moonrise1")) + coord_fixed(1)
p + scale_fill_manual(values = wes_palette("Moonrise1")) + coord_fixed(2)
p + scale_fill_manual(values = wes_palette("Moonrise1")) + coord_fixed()
p + scale_fill_manual(values = wes_palette("Moonrise3")) + coord_fixed()
x <- wes_palette("Moonrise3", type="continuous")
x
x <- wes_palette("Moonrise3", 9, type="continuous")
x
str(x)
x[3]
wes_palette("Moonrise")[3]
wes_palette("Moonrise3")[3]
p <- ggplot(test, aes(x = long, y = lat)) + geom_polygon(aes(fill=id, group=group, colour=wes_palette("Moonrise3")[3]))
p
p <- ggplot(test, aes(x = long, y = lat)) + geom_polygon(aes(fill=id, group=group, colour=(wes_palette("Moonrise3")[3])))
p
p <- ggplot(test, aes(x = long, y = lat)) + geom_polygon(aes(fill=id, group=group, colour="#9C964A")
)
p
p <- ggplot(test, aes(x = long, y = lat)) + geom_polygon(aes(fill=id, group=group, colour="9C964A")
)
p
p <- ggplot(test, aes(x = long, y = lat)) + geom_polygon(aes(fill=id, group=group, colour=9C964A)
p <- ggplot(test, aes(x = long, y = lat)) + geom_polygon(aes(fill=id, group=group, colour='black')
p <- ggplot(test, aes(x = long, y = lat)) + geom_polygon(aes(fill=id, group=group, colour='black'))
p
p <- ggplot(test, aes(x = long, y = lat)) + geom_polygon(aes(fill=id, group=group, color='black'))
p
p <- ggplot(test, aes(x = long, y = lat)) + geom_polygon(aes(fill=id, group=group), color = 'black')
p
p <- ggplot(test) + geom_polygon(aes(x=long, y=lat, group=group), fill=id, color=wes_palette("Moonrise3")[3])
p
p <- ggplot(test) + geom_polygon(aes(x=long, y=lat, group=group, fill=id), color=wes_palette("Moonrise3")[3])
p
p <- ggplot(test) + geom_polygon(aes(x=long, y=lat, group=group, fill=id), color=wes_palette("Moonrise3")[3], size = 3)
p
p <- ggplot(test) + geom_polygon(aes(x=long, y=lat, group=group, fill=id), color=wes_palette("Moonrise3")[3], size = 1.5)
p + scale_fill_manual(values=wes_Palette("Moonrise3"))
p + scale_fill_manual(values=wes_palette("Moonrise3"))
p <- ggplot(test) + geom_polygon(aes(x=long, y=lat, group=group, fill=id), color='black', size = 1.5)
p + scale_fill_manual(values=wes_palette("Moonrise3"))
p <- ggplot(test) + geom_polygon(aes(x=long, y=lat, group=group, fill=id), color='black', size = 1.25)
p
p + scale_fill_manual(values=wes_palette("Moonrise3"))
p <- ggplot(bound) + geom_polygon(aes(x=long, y=lat, group=group), fill='grey', color='black', size = 1.25)
p
p <- p + coord_fixed()
p
p <- ggplot(bound) + geom_polygon(aes(x=long, y=lat, group=group), fill='grey', color='black', size = .5)
p
p <- p + coord_fixed()
p
p + geom_polygon(data=test, aes(x=long, y=lat, group=group, fill=id), color="black", size=.5)
install.pacages("readr")
install.packages("readr")
library(readr)
crime <- read.csv("./crime/Crimes_-_2001_to_present.csv")
View(ogden)
View(crime)
?over
library(rgdal);library(ggplot2); library(dplyr)
bound <- readOGR("./Boundaries", "CPS_Elementary_School_Attendance_Boundaries_SY1415")
bound <- spTransform(bound, CRS("+proj=longlat +datum=WGS84"))
schools <- data.frame(SchoolName = bound$SchoolName, SchoolID = bound$SchoolID, SchoolAddr = bound$SchoolAddr)
boundplot <- fortify(bound)
ogdenIndex <- grep("OGDEN", schools$SchoolName) - 1
jennerIndex <- grep("JENNER", schools$SchoolName) - 1
ogden <- bound %>% filter(id == ogdenIndex)
jenner <- bound %>% filter(id == jennerIndex)
library(ggplot2); library(wesanderson)
p <- ggplot(rbind(ogden, jenner)) + geom_polygon(aes(x=long, y=lat, group=group, fill=id), color='black', size=1)
p <- p + scale_fill_manual(wes_palette("Moonrise3")) + coord_fixed(1)
p
library(ggplot2); library(wesanderson)
p <- ggplot(rbind(ogden, jenner)) + geom_polygon(aes(x=long, y=lat, group=group, fill=id), color='black', size=1)
p <- p + scale_fill_manual(wes_palette("Moonrise3")) + coord_fixed(1)
p
library(rgdal);library(ggplot2); library(dplyr)
bound <- readOGR("./Boundaries", "CPS_Elementary_School_Attendance_Boundaries_SY1415")
bound <- spTransform(bound, CRS("+proj=longlat +datum=WGS84"))
schools <- data.frame(SchoolName = bound$SchoolName, SchoolID = bound$SchoolID, SchoolAddr = bound$SchoolAddr)
boundplot <- fortify(bound)
ogdenIndex <- grep("OGDEN", schools$SchoolName) - 1
jennerIndex <- grep("JENNER", schools$SchoolName) - 1
ogden <- bound %>% filter(id == ogdenIndex)
jenner <- bound %>% filter(id == jennerIndex)
library(rgdal);library(ggplot2); library(dplyr)
bound <- readOGR("./Boundaries", "CPS_Elementary_School_Attendance_Boundaries_SY1415")
bound <- spTransform(bound, CRS("+proj=longlat +datum=WGS84"))
schools <- data.frame(SchoolName = bound$SchoolName, SchoolID = bound$SchoolID, SchoolAddr = bound$SchoolAddr)
boundplot <- fortify(bound)
ogdenIndex <- grep("OGDEN", schools$SchoolName) - 1
jennerIndex <- grep("JENNER", schools$SchoolName) - 1
ogden <- boundplot %>% filter(id == ogdenIndex)
jenner <- boundplot %>% filter(id == jennerIndex)
library(ggplot2); library(wesanderson)
p <- ggplot(rbind(ogden, jenner)) + geom_polygon(aes(x=long, y=lat, group=group, fill=id), color='black', size=1)
p <- p + scale_fill_manual(wes_palette("Moonrise3")) + coord_fixed(1)
p
library(ggplot2); library(wesanderson)
p <- ggplot(rbind(ogden, jenner)) + geom_polygon(aes(x=long, y=lat, group=group, fill=id), color='black', size=1)
p <- p + scale_fill_manual(values = wes_palette("Moonrise3")) + coord_fixed(1)
p
data("meuse")
View(meuse)
geometry(meuse)
meuse.grid
over(sr, meuse)
library(sp)
over(sr, meuse)
over(bound, crime)
meuse.grid
data("meuse.grid")
View(meuse.grid)
?SpatialGridDataFrame
?coordinates
coordinates(crime) = ~Longitude,Latitude
coordinates(crime) = ~Longitude+Latitude
library(readr)
dir.create("crime", showWarnings=F)
crime <- read.csv("./crime/Crimes_-_2001_to_present.csv")
coordinates(crime) = ~Longitude+Latitude
library(rgdal);library(ggplot2); library(dplyr)
bound <- readOGR("./Boundaries", "CPS_Elementary_School_Attendance_Boundaries_SY1415")
bound <- spTransform(bound, CRS("+proj=longlat +datum=WGS84"))
schools <- data.frame(SchoolName = bound$SchoolName, SchoolID = bound$SchoolID, SchoolAddr = bound$SchoolAddr)
boundplot <- fortify(bound)
ogdenIndex <- grep("OGDEN", schools$SchoolName) - 1
jennerIndex <- grep("JENNER", schools$SchoolName) - 1
ogden <- boundplot %>% filter(id == ogdenIndex)
ogden$SchoolName <- "Ogden"
jenner <- boundplot %>% filter(id == jennerIndex)
jenner$SchoolName <- "Jenner"
jenog <- rbind(ogden, jenner)
x <- c(min(jenog$long), max(jenog$long))
y <- c(min(jenog$lat), max(jenog$lat))
schoolLoc <- data.frame(SchoolName = c("Jenner", "Ogden East", "Ogden West"),
long = c(-87.640825, -87.629096, -87.660443),
lat = c(41.902122, 41.900282, 41.891817))
library(ggplot2); library(wesanderson)
pal <- wes_palette("Moonrise3")
p <- ggplot(rbind(ogden, jenner)) +
aes(long, lat, group=group, fill=SchoolName) +
geom_polygon() + geom_path (color = 'white', size = 1) +
scale_fill_manual(values = pal) +
coord_fixed(ratio=1) +
theme(aspect.ratio = 1) +
geom_point(data=schoolLoc, aes(long, lat, group=NA), size = 5,
colour = pal[3], fill=NA)
schoolLoc$labels <- paste0("  ", schoolLoc$SchoolName)
p <- p + geom_text(data=schoolLoc, aes(label=labels, group=NA),
hjust=0, angle=0, show_guide=FALSE)
p
library(ggplot2); library(wesanderson)
pal <- wes_palette("Moonrise3")
p <- ggplot(rbind(ogden, jenner)) +
aes(long, lat, group=group, fill=SchoolName) +
geom_polygon() + geom_path (color = 'white', size = 1) +
scale_fill_manual(values = pal) +
coord_fixed(ratio=1) +
theme(aspect.ratio = 1) +
geom_point(data=schoolLoc, aes(long, lat), size = 5,
colour = pal[3], inherit.aes=F, show_guide=F)
schoolLoc$labels <- paste0("  ", schoolLoc$SchoolName)
p <- p + geom_text(data=schoolLoc, aes(label=labels, group=NA),
hjust=0, angle=0, show_guide=FALSE)
p
library(ggplot2); library(wesanderson)
pal <- wes_palette("Moonrise3")
p <- ggplot(rbind(ogden, jenner)) +
aes(long, lat, group=group, fill=SchoolName) +
geom_polygon() + geom_path (color = 'white', size = 1) +
scale_fill_manual(values = pal) +
coord_fixed(ratio=1) +
theme(aspect.ratio = 1) +
geom_point(data=schoolLoc, aes(long, lat), size = 5,
colour = pal[3], inherit.aes=F, show_guide=F)
schoolLoc$labels <- paste0("  ", schoolLoc$SchoolName)
p <- p + geom_text(data=schoolLoc, aes(label=labels),
hjust=0, angle=0, show_guide=FALSE)
p
library(ggplot2); library(wesanderson)
pal <- wes_palette("Moonrise3")
p <- ggplot(rbind(ogden, jenner)) +
aes(long, lat, group=group, fill=SchoolName) +
geom_polygon() + geom_path (color = 'white', size = 1) +
scale_fill_manual(values = pal) +
coord_fixed(ratio=1) +
theme(aspect.ratio = 1) +
geom_point(data=schoolLoc, aes(long, lat), size = 5,
colour = pal[3], inherit.aes=F, show_guide=F)
schoolLoc$labels <- paste0("  ", schoolLoc$SchoolName)
p <- p + geom_text(data=schoolLoc, aes(label=labels),
hjust=0, angle=0, show_guide=FALSE)
p
library(ggplot2); library(wesanderson)
pal <- wes_palette("Moonrise3")
p <- ggplot(rbind(ogden, jenner)) +
aes(long, lat, group=group, fill=SchoolName) +
geom_polygon() + geom_path (color = 'white', size = 1) +
scale_fill_manual(values = pal) +
coord_fixed(ratio=1) +
theme(aspect.ratio = 1) +
geom_point(data=schoolLoc, aes(long, lat), size = 5,
colour = pal[3], inherit.aes=F, show_guide=F)
schoolLoc$labels <- paste0("  ", schoolLoc$SchoolName)
p <- p + geom_text(data=schoolLoc, aes(label=labels),
hjust=0, angle=0, show_guide=FALSE, inherit.aes=F)
p
library(ggplot2); library(wesanderson)
pal <- wes_palette("Moonrise3")
p <- ggplot(rbind(ogden, jenner)) +
aes(long, lat, group=group, fill=SchoolName) +
geom_polygon() + geom_path (color = 'white', size = 1) +
scale_fill_manual(values = pal) +
coord_fixed(ratio=1) +
theme(aspect.ratio = 1) +
geom_point(data=schoolLoc, aes(long, lat), size = 5,
colour = pal[3], inherit.aes=F, show_guide=F)
schoolLoc$labels <- paste0("  ", schoolLoc$SchoolName)
p <- p + geom_text(data=schoolLoc, aes(long,lat,label=labels),
hjust=0, angle=0, show_guide=FALSE, inherit.aes=F)
p
str(bound)
library(readr)
dir.create("crime", showWarnings=F)
crime <- read.csv("./crime/Crimes_-_2001_to_present.csv")
install.packages(lubridate)
install.packages("lubridate")
View(crime)
library(readr); library(lubridate)
dir.create("crime", showWarnings=F)
crime <- read.csv("./crime/Crimes_-_2001_to_present.csv")
crime <- crim %>% filter(Year == "2015")
crime <- crime %>% filter(Year == "2015")
View(crime)
crime <- crime %>% filter(Year == "2015") %>% filter(!is.na(Latitude))
View(crime)
coordinates(crime) <- c("Longitude", "Latitude")
proj4string(crime) <- proj4string(bound)
over(crime, bound)
df <- over(crime, bound)
View(df)
test <- fortify(crime)
